(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{129:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){},143:function(e,t,c){},165:function(e,t,c){"use strict";c.r(t);var a=c(21),n=c.n(a),s=c(1),r=c.n(s),i=(c(129),c(15)),o=(c(130),c(131),c(196)),l=c(74),d=(c(132),c(167),c(61));l.a.initializeApp({apiKey:"AIzaSyD_y6BQ7TkASWv8R1nGy6BPCi2LWi_iyEw",authDomain:"react-firebase-auth-140bc.firebaseapp.com",projectId:"react-firebase-auth-140bc",storageBucket:"react-firebase-auth-140bc.appspot.com",messagingSenderId:"373561016961",appId:"1:373561016961:web:0d1dc0870b3bc7339e0380"});var b,j,u,m=l.a.firestore(),h=l.a.auth(),O=new l.a.auth.GoogleAuthProvider,p=Object(d.b)(),x=m,g=c(72),f=c(14),v=function(e){var t,c=e.id,a=e.name,n=e.addNewChat,r=Object(s.useState)(""),l=Object(i.a)(r,2),d=l[0],b=l[1],j=Object(s.useState)(""),u=Object(i.a)(j,2),m=u[0],h=u[1];Object(s.useEffect)((function(){c&&x.collection("message-room").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return h(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(s.useEffect)((function(){b(Math.floor(5e3*Math.random()))}),[]);return n?Object(f.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat room");e&&x.collection("message-room").add({name:e})},className:"sidebarChat",children:Object(f.jsx)("h2",{children:"Add New chat "})}):Object(f.jsx)(g.b,{to:"/rooms/".concat(c),children:Object(f.jsxs)("div",{className:"sidebarChat",children:[Object(f.jsx)(o.a,{src:"https://i.pravatar.cc/500/".concat(d)}),Object(f.jsxs)("div",{className:"sidebarChat__info",children:[Object(f.jsx)("h2",{children:a}),Object(f.jsx)("p",{children:null===(t=m[0])||void 0===t?void 0:t.message})]})]})})},S=c(190),C=c(195),A=c(197),N=c(105),G=c.n(N),y=c(106),E=c.n(y),w=c(107),T=c.n(w),U=c(191),J=c(49),V="SET_USER",k="LOGOUT_USER",W=V,P=k,B=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(!1),r=Object(i.a)(n,2),l=r[0],d=r[1],b=Object(s.useState)([]),j=Object(i.a)(b,2),u=j[0],m=j[1],O=Object(s.useState)([]),p=Object(i.a)(O,2),g=p[0],N=p[1],y=Object(s.useState)(""),w=Object(i.a)(y,2),V=w[0],k=w[1],W=Object(J.c)((function(e){return e.userData})).user,B=Object(J.b)();Object(s.useEffect)((function(){var e=x.collection("message-room").onSnapshot((function(e){return m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]);return Object(f.jsxs)("div",{className:"sidebar",children:[Object(f.jsxs)("div",{className:"sidebar__header",children:[Object(f.jsx)(o.a,{src:null===W||void 0===W?void 0:W.photoURL}),Object(f.jsxs)("div",{className:"sidebar__headerRight",children:[Object(f.jsx)(S.a,{children:Object(f.jsx)(G.a,{})}),Object(f.jsx)(S.a,{children:Object(f.jsx)(E.a,{})}),Object(f.jsxs)(S.a,{children:[Object(f.jsx)(T.a,{onClick:function(e){a(!0),d(e.currentTarget)}}),Object(f.jsx)(C.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:c,onClose:function(){return a(!1)},children:Object(f.jsx)(A.a,{onClick:function(){h.signOut(),B({type:P})},children:"Logout"})})]})]})]}),Object(f.jsx)("div",{className:"sidebar__search",children:Object(f.jsxs)("div",{className:"sidebar__SearchContainer",children:[Object(f.jsx)(U.a,{}),Object(f.jsx)("input",{placeholder:"Search or Start new chat",type:"text",value:V,onChange:function(e){!function(e){k(e);var t=u.filter((function(t){return t.data.name.includes(e)}));Array.isArray(t)&&t.length>0&&N(t)}(e.target.value)}})]})}),Object(f.jsxs)("div",{className:"sidebar__chats",children:[Object(f.jsx)(v,{addNewChat:!0}),0===V.length?u.map((function(e){return Object(f.jsx)(v,{id:e.id,name:e.data.name},e.id)})):g.map((function(e){return Object(f.jsx)(v,{id:e.id,name:e.data.name},e.id)}))]})]})},D=c(46),R=(c(143),c(192)),L=c(193),F=c(110),I=c.n(F),Z=c(111),X=c.n(Z),H=c(28),M=c(45),z=(c(144),c(117)),Q=c(108),q=c.n(Q),K=c(118),Y=c(60),_=function(){var e,t,c=Object(s.useState)(""),a=Object(i.a)(c,2),n=a[0],r=a[1],l=Object(s.useState)(""),b=Object(i.a)(l,2),j=b[0],u=b[1],m=Object(s.useState)(""),h=Object(i.a)(m,2),O=h[0],g=h[1],v=Object(s.useState)(!1),C=Object(i.a)(v,2),A=C[0],N=C[1],G=Object(H.f)().roomId,y=Object(J.c)((function(e){return e.userData})).user,E=y.displayName,w=Object(s.useCallback)((function(e){if(console.log(e),"image/png"===e[0].type){var t=Object(d.c)(p,"images/".concat(e[0].name));Object(d.d)(t,e[0]).then((function(e){Object(d.a)(e.ref).then((function(e){x.collection("message-room").doc(G).collection("messages").add({name:E,image:e,timestamp:M.a.firestore.FieldValue.serverTimestamp()})}))})).catch((function(e){return console.log("error",e)}))}else Y.b.warning("please select image file")}),[E,G]),T=Object(K.a)({onDrop:w,multiple:!1,accept:"image/jpeg, image/png , audio/mpeg "}),V=T.getRootProps,k=T.getInputProps;Object(s.useEffect)((function(){G&&(x.collection("message-room").doc(G).onSnapshot((function(e){return u(e.data().name)})),x.collection("message-room").doc(G).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return g(e.docs.map((function(e){return e.data()})))})))}),[G]);return Object(f.jsxs)("div",{className:"chat",children:[Object(f.jsxs)("div",{className:"chat__header",children:[Object(f.jsx)(o.a,{src:"https://i.pravatar.cc/500/".concat(Math.floor(5e3*Math.random()))}),Object(f.jsxs)("div",{className:"header__info",children:[Object(f.jsx)("h3",{children:j}),Object(f.jsxs)("p",{children:["Last Seen",new Date(null===(e=O[O.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(f.jsxs)("div",{className:"chat__headerRight",children:[Object(f.jsx)(S.a,{children:Object(f.jsx)(U.a,{})}),Object(f.jsxs)(S.a,Object(D.a)(Object(D.a)({},V()),{},{children:[Object(f.jsx)("input",Object(D.a)({},k())),Object(f.jsx)(R.a,{})]})),Object(f.jsx)(S.a,{children:Object(f.jsx)(L.a,{})})]})]}),Object(f.jsx)("div",{className:"chat__body",children:Object.keys(O).map((function(e){var t;return Object(f.jsxs)("p",{className:"chat__message ".concat(O[e].name===y.displayName&&"chat__reciver"),id:e,children:[Object(f.jsx)("span",{className:"chat__name",children:O[e].name}),console.log(O[e].image),O[e].image?Object(f.jsx)("img",{src:O[e].image,alt:"",width:100,height:100}):"",O[e].message,Object(f.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=O[e].timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]},e)}))}),Object(f.jsxs)("div",{className:"chat__footer",children:[Object(f.jsx)(I.a,{onClick:function(){return N(!0)},style:{cursor:"pointer"}}),A&&Object(f.jsx)(q.a,{onOutsideClick:function(){N(!1)},children:Object(f.jsx)(z.a,{onSelect:function(e){return r("".concat(n).concat(e.native))},style:{position:"absolute",bottom:"130px",objectFit:"contain"}})}),Object(f.jsxs)("form",{children:[Object(f.jsx)("input",{type:"text",value:n,onChange:function(e){return r(e.target.value)},placeholder:"type Message...."}),Object(f.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),x.collection("message-room").doc(G).collection("messages").add({message:n,name:y.displayName,timestamp:M.a.firestore.FieldValue.serverTimestamp()}),r("")},children:"Send A Message"})]}),Object(f.jsx)(X.a,{})]})]})},$=c(88),ee=c(194),te=c(89);var ce=function(){var e=Object(J.b)();return Object(s.useEffect)((function(){h.onAuthStateChanged((function(t){t?e({type:W,payload:t}):Y.b.error("No User Found!!")}))}),[e]),Object(f.jsxs)(ae,{children:[Object(f.jsx)("title",{children:"Login"}),Object(f.jsxs)(ne,{children:[Object(f.jsx)(se,{src:"data:image/png;base64,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"}),Object(f.jsx)(ee.a,{variant:"contained",style:{background:"#56C0FB",color:"#0c0b0b",textShadow:"2px 2px 9px rgba(4,4,4,0.56)"},onClick:function(){h.signInWithPopup(O).catch((function(e){return Y.b.error("login failed",e)}))},children:"Sign in with google"})]})]})},ae=te.a.div(b||(b=Object($.a)(["\n  display: grid;\n  place-items: center;\n  height: 100vh;\n  background-color: whitesmoke;\n"]))),ne=te.a.div(j||(j=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 100px;\n  align-items: center;\n  background-color: white;\n  border-radius: 20px;\n  box-shadow: -30px 42px 29px -19px rgba(31, 31, 31, 1);\n  -webkit-box-shadow: -30px 42px 29px -19px rgba(31, 31, 31, 1);\n  -moz-box-shadow: -30px 42px 29px -19px rgba(31, 31, 31, 1);\n"]))),se=te.a.img(u||(u=Object($.a)(["\n  height: 200px;\n  width: 200px;\n  margin-bottom: 50px;\n"])));c(164);var re=function(){var e=Object(J.c)((function(e){return e.userData})).user;return Object(f.jsxs)(r.a.Fragment,{children:[!e&&Object(f.jsx)(ce,{}),e&&Object(f.jsx)(r.a.Fragment,{children:Object(f.jsx)("div",{className:"app",children:Object(f.jsx)("div",{className:"app__body",children:Object(f.jsxs)(g.a,{children:[Object(f.jsx)(B,{}),Object(f.jsx)(Y.a,{position:"center-top"}),Object(f.jsxs)(H.c,{children:[Object(f.jsx)(H.a,{exact:!0,path:"/rooms/:roomId",children:Object(f.jsx)(_,{})}),Object(f.jsx)(H.a,{path:"/"})]})]})})})})]})},ie=c(66),oe=c(115),le=c(116),de={user:null},be=V,je=k,ue=Object(ie.combineReducers)({userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload;switch(c){case be:return Object(D.a)(Object(D.a)({},e),{},{user:a});case je:return{user:null};default:return e}}}),me=ue,he=[le.a],Oe=Object(ie.createStore)(me,{},Object(oe.composeWithDevTools)(ie.applyMiddleware.apply(void 0,he)));n.a.render(Object(f.jsx)(J.a,{store:Oe,children:Object(f.jsx)(re,{})}),document.querySelector("#root"))}},[[165,1,2]]]);